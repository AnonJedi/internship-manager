extends ./layout.jade

block container
  .container
  
    h4.mt-5.mb-3
      | Новый урок
    
    hr  
    
    form(method='POST', type="form")
      input(type="hidden", name="_csrf", value="#{csrf}")

      .form-group
        label(for="title-new")
          | Заголовок
        input(id="title-new", class="form-control", type="text", name="title", placeholder="title", required)
      .form-group
        label(for="description-new")
          | Описание
        input(id="description-new", class="form-control", type="text", name="description", placeholder="description", required)
      .form-group
        label(for="picture-new")
          | Картинка
        input(id="picture-new", class="form-control", type="text", name="picture", placeholder="picture")
      .form-check
        label(for="locked-new", class="form-check-label")
          input(id="locked-new", class="form-check-input", type="checkbox", name="islocked", checked)
          | Урок закрыт
          
      .form-group
        label(for="resources-new")
          | Ресурсы
        textarea(id="resources-new", class="form-control", name="resources", placeholder="формат типа: [title](link)")

      input(type="submit", class="btn btn-primary", value="Создать")

    hr
  
    h4
      | Уроки
  
    table.table.table-striped
      each lesson, i in lessons
        tr
          td
            a(href="/admin/lessons/#{lesson.id}")
              | #{lesson.task.title}
              
          td
            if i > 0
              form(method="POST", action="/admin/lessons/#{lesson.id}/order-up")
                input(type="hidden", name="_csrf", value="#{csrf}")
                input(type="submit", value="Повысить порядок")
          td
            if i < lessons.length - 1
              form(method="POST", action="/admin/lessons/#{lesson.id}/order-down")
                input(type="hidden", name="_csrf", value="#{csrf}")
                input(type="submit", value="Понизить порядок")
          td.text-right
            form(method="POST", action="/admin/lessons/#{lesson.id}")
              input(type="hidden", name="_csrf", value="#{csrf}")
              input(type="hidden", name="action", value="DELETE")
              input(type="submit", class="btn btn-danger", value="Удалить")
